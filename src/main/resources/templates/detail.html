<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Home Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="icon" type="logo/png" th:href="@{/logo.png}">
    <link rel="stylesheet" href="/CSS/body.css">
    <link rel="stylesheet" href="/CSS/detail.css">
    <!-- SweetAlert2 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>
<style>
    /* ƒê·∫£m b·∫£o c√°c card c√≥ chi·ªÅu cao b·∫±ng nhau v√† kho·∫£ng c√°ch ƒë·ªìng ƒë·ªÅu */
    .product-row {
        display: flex;
        flex-wrap: wrap;
    }

    /* Kh√¥ng c·∫ßn ghi ƒë√® col-md-4 b·∫±ng flex, ƒë·ªÉ Bootstrap t·ª± x·ª≠ l√Ω */
    .product-row .col-md-4 {
        display: flex; /* Gi·ªØ flex ƒë·ªÉ card b√™n trong cƒÉn ch·ªânh chi·ªÅu cao */
    }

    .card {
        display: flex;
        flex-direction: column;
        min-height: 350px; /* Chi·ªÅu cao t·ªëi thi·ªÉu cho card */
        border: 1px solid #ddd;
        width: 100%; /* ƒê·∫£m b·∫£o card chi·∫øm to√†n b·ªô chi·ªÅu r·ªông c·ªßa col */
    }

    .card-img-top {
        height: 250px; /* Chi·ªÅu cao h√¨nh ·∫£nh */
        object-fit: cover;
    }

    .card-body {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .card-title {
        min-height: 48px;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
    }

    .card-text {
        margin-bottom: 0;
    }
</style>
<body>

<!-- Nh√∫ng Header -->
<div th:replace="~{web/header :: header}"></div>
<!-- Slide ·∫¢nh -->
<div id="carouselExample" class="carousel slide mt-5 pt-5" data-bs-ride="carousel">
    <!-- D·∫•u ch·∫•m chuy·ªÉn slide -->
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="0" class="active"></button>
        <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="1"></button>
        <button type="button" data-bs-target="#carouselExample" data-bs-slide-to="2"></button>
    </div>

    <!-- ·∫¢nh slide -->
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="/images/slide1.png" class="d-block w-100" alt="Slide 1">
        </div>
        <div class="carousel-item">
            <img src="/images/slide2.png" class="d-block w-100" alt="Slide 2">
        </div>
        <div class="carousel-item">
            <img src="/images/slide3.png" class="d-block w-100" alt="Slide 3">
        </div>
    </div>


    <!-- N√∫t chuy·ªÉn slide -->
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
    </button>
</div>

<!-- Ph√¢n lo·∫°i s·∫£n ph·∫©m -->
<div class="container text-center mt-4" id="product-section">
    <h4 class="fw-bold">Ph√¢n lo·∫°i s·∫£n ph·∫©m</h4>
    <div class="row mt-3 justify-content-center">
        <div class="col-md-3">
            <button class="btn-category w-100">
                <i class="bi bi-star-fill"></i> S·∫£n ph·∫©m Limited
            </button>
        </div>
        <div class="col-md-3">
            <button class="btn-category w-100">
                <i class="bi bi-fire"></i> S·∫£n ph·∫©m b√°n ch·∫°y
            </button>
        </div>
        <div class="col-md-3">
            <button class="btn-category w-100">
                <i class="bi bi-stars"></i> S·∫£n ph·∫©m m·ªõi
            </button>
        </div>
        <div class="col-md-3">
            <button class="btn-category w-100">
                <i class="bi bi-tag"></i> S·∫£n ph·∫©m gi·∫£m gi√°
            </button>
        </div>
    </div>
</div>

<!-- b·ªô l·ªçc v√† display -->
<div class="container mt-4" >
    <div class="row">
        <div class="col-md-3 bg-light p-3">
            <h2 class="fw-bold" style="color: #4D9AB4;">B·ªô l·ªçc</h2>

            <!-- b·ªô l·ªçc -->
            <div class="mb-3">
                <label class="fw-bold text-orange">T√¨m ki·∫øm</label>
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Nh·∫≠p t·ª´ kh√≥a">
                    <button class="btn btn-orange"><i class="bi bi-search"></i></button>
                </div>
            </div>
            <div class="mb-3">
                <label class="fw-bold text-orange" style="color: #4D9AB4;">L·ªëi ch∆°i</label>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="toanDien">
                    <label class="form-check-label" for="toanDien">C√¥ng th·ªß to√†n di·ªán</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="phongThu">
                    <label class="form-check-label" for="phongThu">Ph·∫£n t·∫°t ph√≤ng th·ªß</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="tanCong">
                    <label class="form-check-label" for="tanCong">T·∫•n c√¥ng</label>
                </div>
            </div>
            <hr>

            <h4 class="fw-bold text-orange" style="color: #4D9AB4;">Tr√¨nh ƒë·ªô ch∆°i</h4>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="color1">
                <label class="form-check-label" for="color1">M·ªõi ch∆°i</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="color2">
                <label class="form-check-label" for="color2">Trung b√¨nh</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="color3">
                <label class="form-check-label" for="color3">Trung b√¨nh kh√°</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="color4">
                <label class="form-check-label" for="color4">Kh√° t·ªët</label>
            </div>
            <hr>

            <h4 class="fw-bold text-orange" style="color: #4D9AB4;">Lo·∫°i s·∫£n ph·∫©m</h4>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="type1">
                <label class="form-check-label" for="type1">V·ª£t c·∫ßu l√¥ng</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="type2">
                <label class="form-check-label" for="type2">Gi√†y c·∫ßu l√¥ng</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="type3">
                <label class="form-check-label" for="type3">Ph·ª• ki·ªán c·∫ßu l√¥ng</label>
            </div>
            <hr>

            <div class="mb-3">
                <label class="fw-bold text-orange" style="color: #4D9AB4;">Tr·ªçng l∆∞·ª£ng</label>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="2F">
                    <label class="form-check-label" for="2F">2F (68g)</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="2U">
                    <label class="form-check-label" for="2U">2U: 90g ‚Äì 94g</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="3U">
                    <label class="form-check-label" for="3U">3U: 85g ‚Äì 89g</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="4U">
                    <label class="form-check-label" for="4U">4U: 80g ‚Äì 84g</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="5U">
                    <label class="form-check-label" for="5U">5U: &lt;80g</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="6U">
                    <label class="form-check-label" for="6U">6U</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="7U">
                    <label class="form-check-label" for="7U">7U</label>
                </div>
            </div>

            <h4 class="fw-bold text-blue" style="color: #4D9AB4;">M·ª©c gi√°</h4>
            <div class="price-slider">
                <div class="slider-track"></div> <!-- Thanh m√†u xanh -->
                <input type="range" id="minPrice" class="range-slider" min="0" max="20000000" step="100000" value="0">
                <input type="range" id="maxPrice" class="range-slider" min="0" max="20000000" step="100000" value="20000000">
            </div>

            <p class="price-text">Gi√°: <span id="minValue">0</span> VND - <span id="maxValue">20.000.000</span> VND</p>
            <button class="btn btn-outline-blue" onclick="resetSlider()">ƒê·∫∑t l·∫°i</button>
            <button class="btn btn-blue">√Åp d·ª•ng</button>
        </div>

        <div class="col-md-9">
            <div class="row">
                <!-- Ph·∫ßn 1: ·∫¢nh s·∫£n ph·∫©m -->
                <div class="col-6">
                    <!-- Duy·ªát danh s√°ch ·∫£nh n·∫øu c√≥ nhi·ªÅu -->
                    <img
                            src="https://static.fbshop.vn/wp-content/uploads/2024/01/z5421143261601_93bca770bf56ead40a77f2d1774da876-400x533.jpg"
                            class="img-fluid img-thumbnail"
                            alt="·∫¢nh s·∫£n ph·∫©m"
                    >
                </div>

                <!-- Ph·∫ßn 2: Th√¥ng tin thu·ªôc t√≠nh s·∫£n ph·∫©m -->
                <div class="col-6">
                    <h4>Th√¥ng tin s·∫£n ph·∫©m</h4>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <h2 style="color: #4D9AB4;" th:text="${product.name}">T√™n s·∫£n ph·∫©m</h2>
                        </li>
                        <li style="font-size: 1rem; margin-top: 5px; list-style: none; padding-left: 10px;">
                            <span style="color: #4D9AB4;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                            <span style="color: #666;">(4.8/5)</span>
                            <span style="color: #ccc; margin: 0 8px;">|</span>
                            <span style="color: #666;">123 l∆∞·ª£t mua</span>
                        </li>
                        <li class="list-group-item">
                            <a style="font-size: 1.25rem" th:text="${#numbers.formatDecimal(product.price, 0, 'COMMA', 0, 'POINT') + ' VND'}">Gi√°</a>
                        </li>
                        <!-- Th√¥ng tin b·ªï sung -->
                        <li class="list-group-item">
                            <strong>Lo·∫°i s·∫£n ph·∫©m:</strong> <span th:text="${product.typeName}">Lo·∫°i</span>
                        </li>
                        <li class="list-group-item" th:if="${product.playStyleName}">
                            <strong>L·ªëi ch∆°i:</strong> <span th:text="${product.playStyleName}">L·ªëi ch∆°i</span>
                        </li>
                        <li class="list-group-item" th:if="${product.skillLevelName}">
                            <strong>Tr√¨nh ƒë·ªô:</strong> <span th:text="${product.skillLevelName}">Tr√¨nh ƒë·ªô</span>
                        </li>
                        <li class="list-group-item" th:if="${product.weightName}">
                            <strong>Tr·ªçng l∆∞·ª£ng:</strong> <span th:text="${product.weightName}">Tr·ªçng l∆∞·ª£ng</span>
                        </li>
                        <!-- S·ªë l∆∞·ª£ng -->
                        <div class="mt-3 d-flex align-items-center ms-3">
                            <span class="me-2">S·ªë l∆∞·ª£ng:</span>
                            <div class="d-flex align-items-center justify-content-between"
                                 style="border: 1px solid #ccc; border-radius: 999px; padding: 4px 10px; width: 110px; cursor: pointer;">
                                <span onclick="decreaseQty()" style="flex: 1; text-align: center; font-weight: bold;">‚àí</span>
                                <span id="qtyValue" style="flex: 1; text-align: center;">1</span>
                                <span onclick="increaseQty()" style="flex: 1; text-align: center; font-weight: bold;">+</span>
                            </div>
                        </div>
                        <!-- N√∫t th√™m v√†o gi·ªè + mua ngay -->
                        <!-- Trong ph·∫ßn th√¥ng tin s·∫£n ph·∫©m -->
                        <div class="mt-3 ms-3 d-flex gap-2">
                            <button class="btn add-cart-btn"
                                    th:if="${product.id != null}"
                                    th:attr="data-product-id=${product.id},data-product-name=${product.name},data-product-price=${product.price}"
                                    onclick="addToCart(this)">üõí Th√™m v√†o gi·ªè h√†ng</button>
                        </div>
                        <!-- Popup th√¥ng b√°o khi th√™m v√†o gi·ªè -->
                        <div id="cartPopup" style="display: none; position: fixed; bottom: 20px; right: 20px; background-color: #4D9AB4; color: white; padding: 10px 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 999;">
                            ‚úÖ ƒê√£ th√™m v√†o gi·ªè h√†ng!
                        </div>
                    </ul>
                    <!-- Khung ∆∞u ƒë√£i -->
                    <div class="ms-3 mt-4 p-3" style="border: 1px solid #4D9AB4; border-radius: 12px; max-width: 500px;">
                        <h5 style="color: #4D9AB4; font-weight: bold;">üéÅ ∆Øu ƒë√£i khi mua s·∫£n ph·∫©m</h5>
                        <ul class="list-unstyled" style="font-size: 0.95rem;">
                            <li class="mb-1"><i class="bi bi-check-circle-fill me-2" style="color: #4D9AB4;"></i>T·∫∑ng bao nhung/bao ƒë∆°n b·∫£o v·ªá v·ª£t c·∫ßu l√¥ng</li>
                            <li class="mb-1"><i class="bi bi-check-circle-fill me-2" style="color: #4D9AB4;"></i>T·∫∑ng qu·∫•n c√°n v·ª£t c·∫ßu l√¥ng</li>
                            <li class="mb-1"><i class="bi bi-check-circle-fill me-2" style="color: #4D9AB4;"></i>Freeship v·ªõi ƒë∆°n h√†ng tr√™n 1 tri·ªáu</li>
                            <li class="mb-1"><i class="bi bi-check-circle-fill me-2" style="color: #4D9AB4;"></i>Nh·∫≠n h√†ng ki·ªÉm tra tr∆∞·ªõc, thanh to√°n sau</li>
                            <li class="mb-1"><i class="bi bi-check-circle-fill me-2" style="color: #4D9AB4;"></i>B·∫£o h√†nh v·ª£t 90 ng√†y l·ªói 1 ƒë·ªïi 1 l·ªói nh√† s·∫£n xu·∫•t</li>
                            <li class="mb-1"><i class="bi bi-check-circle-fill me-2" style="color: #4D9AB4;"></i>C∆° h·ªôi nh·∫≠n voucher cho c√°c ƒë∆°n h√†ng sau</li>
                            <li><i class="bi bi-check-circle-fill me-2" style="color: #4D9AB4;"></i>V√¥ v√†n d·ªãch v·ª• h·ªó tr·ª£ mi·ªÖn ph√≠ kh√°c</li>
                        </ul>
                    </div>
                </div>


                <!-- Khung m√¥ t·∫£ v√† ƒë√°nh gi√° -->
                <div class="row mt-4 ms-2">
                    <div class="col-md-12">
                        <!-- M√¥ t·∫£ s·∫£n ph·∫©m -->
                        <div class="p-3 mb-4" style="background-color: #f8fcfd; border: 1px solid #4D9AB4; border-radius: 12px; max-width: 1000px;">
                            <h5 style="color: #4D9AB4; font-weight: bold;">üìù M√¥ t·∫£ s·∫£n ph·∫©m</h5>
                            <p style="margin-bottom: 0; font-size: 0.95rem; line-height: 1.6;">
                                V·ª£t c·∫ßu l√¥ng Yonex Astrox 100ZZ l√† d√≤ng v·ª£t cao c·∫•p, ph√π h·ª£p v·ªõi ng∆∞·ªùi ch∆°i c√≥ tr√¨nh ƒë·ªô n√¢ng cao v√† chuy√™n nghi·ªáp. V·ª£t c√≥ th√¢n c·ª©ng, ƒë·∫ßu n·∫∑ng, h·ªó tr·ª£ t·ªëi ƒëa s·ª©c m·∫°nh cho c√°c c√∫ ƒë·∫≠p c·∫ßu ƒë·∫ßy uy l·ª±c. V·ªõi c√¥ng ngh·ªá hi·ªán ƒë·∫°i c·ªßa Yonex, ng∆∞·ªùi d√πng s·∫Ω c·∫£m nh·∫≠n ƒë∆∞·ª£c ƒë·ªô n·∫£y, ƒë·ªô chu·∫©n x√°c v√† ki·ªÉm so√°t tuy·ªát v·ªùi trong t·ª´ng pha ƒë√°nh.
                            </p>
                        </div>

                        <!-- ƒê√°nh gi√° ng∆∞·ªùi d√πng -->
                        <div class="p-3" style="border: 1px solid #4D9AB4; border-radius: 12px; max-width: 1000px;">
                            <h5 style="color: #4D9AB4; font-weight: bold;">‚≠ê ƒê√°nh gi√° t·ª´ ng∆∞·ªùi d√πng</h5>

                            <!-- 1 ƒë√°nh gi√° m·∫´u -->
                            <div class="mt-2" style="font-size: 0.95rem;">
                                <div class="d-flex align-items-center mb-1">
                                    <strong class="me-2">Nguy·ªÖn VƒÉn A</strong>
                                    <span style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                                </div>
                                <p style="margin-bottom: 8px;">V·ª£t ƒë·∫≠p r·∫•t ƒë√£ tay, c·∫£m gi√°c c·∫ßu r√µ r√†ng, shop giao h√†ng nhanh c·ª±c!</p>

                                <div class="d-flex align-items-center mb-1">
                                    <strong class="me-2">L√™ Th·ªã B</strong>
                                    <span style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                                </div>
                                <p style="margin-bottom: 0;">S·∫£n ph·∫©m t·ªët, tuy nhi√™n g√≥i h√†ng ch∆∞a ƒë∆∞·ª£c k·ªπ l·∫Øm. S·∫Ω ·ªßng h·ªô l·∫ßn sau!</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>
</div>

<!-- S·∫£n ph·∫©m t∆∞∆°ng t·ª± -->
<div class="container mt-5">
    <h4 style="color: #0f1b40; font-weight: bold;">S·∫£n ph·∫©m t∆∞∆°ng t·ª±</h4>
    <div class="row mt-3">

        <!-- S·∫£n ph·∫©m 1 -->
        <div class="col-md-3 text-center">
            <img src="https://static.fbshop.vn/wp-content/uploads/2025/04/DSC06150-400x400.jpg" class="img-fluid rounded mb-2" alt="V·ª£t 1">
            <p style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (0)</p>
            <p class="fw-semibold">V·ª£t C·∫ßu L√¥ng VS Twister 33 | C√¢n B·∫±ng Linh Ho·∫°t</p>
            <p style="color: #4D9AB4; font-weight: bold;">2.950.000ƒë</p>
        </div>

        <!-- S·∫£n ph·∫©m 2 -->
        <div class="col-md-3 text-center">
            <img src="https://static.fbshop.vn/wp-content/uploads/2025/03/485765551_1192792819514769_5401431562733627627_n-400x533.jpg" class="img-fluid rounded mb-2" alt="V·ª£t 2">
            <p style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ (0)</p>
            <p class="fw-semibold">V·ª£t C·∫ßu L√¥ng Yonex Astrox 100ZZ Kurenai</p>
            <p style="color: #4D9AB4; font-weight: bold;">Li√™n h·ªá</p>
        </div>

        <!-- S·∫£n ph·∫©m 3 -->
        <div class="col-md-3 text-center">
            <img src="https://static.fbshop.vn/wp-content/uploads/2025/03/0d5cab5dd51e65403c0f-1-400x533.jpg" class="img-fluid rounded mb-2" alt="V·ª£t 3">
            <p style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÜ‚òÜ (0)</p>
            <p class="fw-semibold">V·ª£t c·∫ßu l√¥ng Lining 3D Calibar 900C | Phi√™n b·∫£n gi·ªõi h·∫°n</p>
            <p style="color: #4D9AB4; font-weight: bold;">3.200.000ƒë</p>
        </div>

        <!-- S·∫£n ph·∫©m 4 -->
        <div class="col-md-3 text-center">
            <img src="https://static.fbshop.vn/wp-content/uploads/2025/03/DSC06081-400x400.jpg" class="img-fluid rounded mb-2" alt="V·ª£t 4">
            <p style="color: #ffc107;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (0)</p>
            <p class="fw-semibold">V·ª£t c·∫ßu l√¥ng Victor Auraspeed 100X | Ki·ªÉm So√°t C·∫ßu T·ªët</p>
            <p style="color: #4D9AB4; font-weight: bold;">3.750.000ƒë</p>
        </div>

    </div>
</div>


<!-- N·ªôi dung ch√≠nh -->
<main class="container mt-5 pt-5">
    <div class="container mt-4">
        <div class="row">
            <!-- C·ªôt b√™n tr√°i (4 c·ªôt) - Sidebar v·ªõi video YouTube -->
            <div class="col-md-4 bg-light p-3">
                <h3 style="color: #4D9AB4; font-weight: bold;">ƒêam m√™ c·∫ßu l√¥ng c√πng ch√∫ng t√¥i</h3>
                <p style="text-align: justify;">
                    V·ªõi xu·∫•t ph√°t t·ª´ nh·ªØng ng∆∞·ªùi ch∆°i c·∫ßu l√¥ng v√† ƒëam m√™ c·∫ßu l√¥ng, ch√∫ng t√¥i hi·ªÉu ƒë∆∞·ª£c s·ª± c·∫ßn thi·∫øt
                    c·ªßa d·ª•ng c·ª• c·∫ßu l√¥ng ch√≠nh h√£ng ph·ª•c v·ª• cho ng∆∞·ªùi ch∆°i s·∫Ω mang t·ªõi nh·ªØng c·∫£m gi√°c th√≠ch th√∫ nh·∫•t
                    cho nh·ªØng ng∆∞·ªùi ƒëam m√™ b·ªô m√¥n n√†y.
                </p>
                <p style="text-align: justify;">
                    V·ªõi h·ªá th·ªëng C·ª≠a H√†ng c·∫ßu l√¥ng tr√™n to√†n qu·ªëc s·∫Ω gi√∫p ng∆∞·ªùi ch∆°i c√≥ ƒë·ªãa ƒëi·ªÉm uy t√≠n v√† ƒëa d·∫°ng s·∫£n ph·∫©m.
                    Qu√Ω Kh√°ch c√≥ th·ªÉ y√™n t√¢m l·ª±a ch·ªçn cho m√¨nh nh·ªØng d·ª•ng c·ª•, ph·ª• ki·ªán ph√π h·ª£p v·ªõi tr√¨nh ƒë·ªô v√† s·ªü th√≠ch
                    c·ªßa m√¨nh ƒë·ªÉ c√πng ch√°y v·ªõi ƒëam m√™ C·∫ßu L√¥ng.
                </p>
                <h4 style="color: #4D9AB4; font-weight: bold;">ƒê·ªìng H√†nh C√πng ƒêam M√™!</h4>
            </div>

            <!-- C·ªôt b√™n ph·∫£i (8 c·ªôt) - N·ªôi dung ch√≠nh -->
            <div class="col-md-8 bg-white p-3">
                <div class="ratio ratio-16x9">
                    <iframe src="https://www.youtube.com/embed/4lp8qPhkG8E"
                            title="Video Gi·ªõi Thi·ªáu"
                            allowfullscreen>
                    </iframe>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- Form t∆∞ v·∫•n -->
<main class="container mt-5 pt-5">
    <div class="row mt-5">
        <div class="col-md-12 bg-light p-4 rounded">
            <h3 class="text-center" style="color: #4D9AB4; font-weight: bold;">ƒêƒÉng k√Ω t∆∞ v·∫•n ngay</h3>
            <form>
                <div class="mb-3">
                    <input type="text" class="form-control" placeholder="Nh·∫≠p h·ªç t√™n c·ªßa b·∫°n" required>
                </div>
                <div class="mb-3">
                    <input type="tel" class="form-control" placeholder="Nh·∫≠p s·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n" required>
                </div>
                <div class="mb-3">
                    <input type="email" class="form-control" placeholder="Nh·∫≠p email c·ªßa b·∫°n" required>
                </div>
                <div class="mb-3">
                    <textarea class="form-control" rows="4" placeholder="Nh·∫≠p n·ªôi dung y√™u c·∫ßu" required></textarea>
                </div>
                <div class="text-center">
                    <button type="submit" class="btn" style="background-color: #4D9AB4; color: white;">G·ª≠i ƒëi</button>
                </div>
            </form>
        </div>
    </div>
</main>


<!-- Nh√∫ng Footer -->
<div th:replace="~{web/footer :: footer}"></div>
<script src="/js/body.js" defer></script>
<script>
    let quantity = 1;

    function increaseQty() {
        quantity++;
        document.getElementById('qtyValue').innerText = quantity;
    }

    function decreaseQty() {
        if (quantity > 1) {
            quantity--;
            document.getElementById('qtyValue').innerText = quantity;
        }
    }

    function updateCartCount() {
        const cart = JSON.parse(sessionStorage.getItem('guest_cart')) || [];
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        const cartCountElement = document.getElementById('cart-count');
        if (cartCountElement) {
            cartCountElement.innerText = totalItems;
        }
    }

    function addToCart(button) {
        const productId = parseInt(button.getAttribute('data-product-id'));
        const productName = button.getAttribute('data-product-name');
        const productPrice = parseFloat(button.getAttribute('data-product-price'));
        const qtyElement = document.getElementById('qtyValue');
        const quantity = qtyElement ? parseInt(qtyElement.innerText) : null;

        console.log('productId:', productId, 'type:', typeof productId);
        console.log('productName:', productName);
        console.log('productPrice:', productPrice);
        console.log('quantity:', quantity);

        if (!productId || isNaN(productId)) {
            Swal.fire({
                icon: 'error',
                title: 'L·ªói!',
                text: `ID s·∫£n ph·∫©m kh√¥ng h·ª£p l·ªá: ${productId}`,
                showConfirmButton: true
            });
            return;
        }

        if (!qtyElement || !quantity || isNaN(quantity) || quantity < 1) {
            Swal.fire({
                icon: 'error',
                title: 'L·ªói!',
                text: 'S·ªë l∆∞·ª£ng kh√¥ng h·ª£p l·ªá ho·∫∑c kh√¥ng ƒë∆∞·ª£c t√¨m th·∫•y!',
                showConfirmButton: true
            });
            return;
        }

        fetch('/check-auth', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            },
            credentials: 'include'
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(authData => {
                console.log('check-auth response:', authData);
                if (authData.authenticated && authData.user && authData.user.email && authData.token) {
                    handleLoggedInUser(authData.user.email, productId, productName, productPrice, quantity, authData.token);
                } else {
                    Swal.fire({
                        icon: 'warning',
                        title: 'Ch∆∞a ƒëƒÉng nh·∫≠p',
                        text: 'Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng!',
                        showConfirmButton: true,
                        confirmButtonText: 'ƒêƒÉng nh·∫≠p',
                        willClose: () => {
                            window.location.href = '/login';
                        }
                    });
                }
            })
            .catch(error => {
                console.error('Error in check-auth:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'L·ªói!',
                    text: `Kh√¥ng th·ªÉ ki·ªÉm tra tr·∫°ng th√°i ƒëƒÉng nh·∫≠p: ${error.message}`,
                    showConfirmButton: true
                });
            });
    }

    function handleLoggedInUser(email, productId, productName, productPrice, quantity, token) {
        console.log('Sending request to /api/cart/add with token:', token);
        fetch('/api/cart/add', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
            },
            body: JSON.stringify({
                productId: parseInt(productId),
                quantity: quantity,
                email: email
            })
        })
            .then(response => {
                console.log('Response status:', response.status);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log('Response data:', data);
                if (data.success) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Th√†nh c√¥ng!',
                        text: `ƒê√£ th√™m ${productName} v√†o gi·ªè h√†ng!`,
                        showConfirmButton: false,
                        timer: 1500
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'L·ªói!',
                        text: data.message || 'Kh√¥ng th·ªÉ th√™m v√†o gi·ªè h√†ng!',
                        showConfirmButton: true
                    });
                }
            })
            .catch(error => {
                console.error('Error in handleLoggedInUser:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'L·ªói!',
                    text: `Kh√¥ng th·ªÉ th√™m v√†o gi·ªè h√†ng: ${error.message}`,
                    showConfirmButton: true
                });
            });
    }

    function handleGuestUser(productId, productName, productPrice, quantity) {
        fetch('/api/cart/check-stock', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ productId: parseInt(productId), quantity: quantity })
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const contentType = response.headers.get('content-type');
                if (!contentType || !contentType.includes('application/json')) {
                    throw new Error('Ph·∫£n h·ªìi kh√¥ng ph·∫£i JSON');
                }
                return response.json();
            })
            .then(data => {
                if (data.success) {
                    let cart = JSON.parse(sessionStorage.getItem('guest_cart')) || [];
                    const existingItem = cart.find(item => item.productId === productId);
                    if (existingItem) {
                        existingItem.quantity += quantity;
                    } else {
                        cart.push({
                            productId: productId,
                            productName: productName,
                            productPrice: productPrice,
                            quantity: quantity
                        });
                    }
                    sessionStorage.setItem('guest_cart', JSON.stringify(cart));
                    updateCartCount();

                    Swal.fire({
                        icon: 'success',
                        title: 'Th√†nh c√¥ng!',
                        text: `ƒê√£ th√™m ${productName} v√†o gi·ªè h√†ng!`,
                        showConfirmButton: false,
                        timer: 1500
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'L·ªói!',
                        text: data.message || 'S·∫£n ph·∫©m kh√¥ng ƒë·ªß h√†ng!',
                        showConfirmButton: true
                    });
                }
            })
            .catch(error => {
                console.error('Error in handleGuestUser:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'L·ªói!',
                    text: `Kh√¥ng th·ªÉ ki·ªÉm tra t·ªìn kho: ${error.message}`,
                    showConfirmButton: true
                });
            });
    }

    function getJwtToken() {
        const cookies = document.cookie.split(';');
        console.log('Cookies:', document.cookie);
        for (let cookie of cookies) {
            const [name, value] = cookie.trim().split('=');
            console.log('Checking cookie:', name, value);
            if (name === 'jwtToken' && value) {
                console.log('Found jwtToken:', value);
                return value;
            }
        }
        console.warn('No jwtToken found in cookies');
        return null;
    }
</script>


</body>
</html>
